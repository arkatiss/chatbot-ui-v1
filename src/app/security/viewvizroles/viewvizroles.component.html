<div class="row col-sm-12 p-0 m-0 pb-5">
  <!-- <h4 class="font-14 fw-500  pr-3 pt-3 pb-3 pl-4 mb-0 primary">Modify / Delete Roles</h4> -->

  <div class="row m-0 col-12 p-0">
    <div class="col-4 p-0">
      <h4 class="font-14 fw-500 pr-3 pt-3 pb-3 pl-4 mb-0 primary">Viz Roles</h4>
    </div>
    <div class="col-8">
      <mat-form-field
        appearance="outline"
        class="font-11 col-sm-4 p-1 float-right"
      >
        <mat-label>Search </mat-label>
        <input
          type="text"
          matInput
          autocomplete="off"
          placeholder="search"
          (keyup)="filterDatatable($event)"
        />
      </mat-form-field>
    </div>
  </div>
  <div class="col-sm-12 p-0 pt-1 mt-1 ml-1">
    <div class="row m-0 pl-1">
      <div class="col-sm-2 p-0 ml-3" *ngIf="!showupdatebtn">
        <form>
          <mat-form-field appearance="outline" class="font-11 col-sm-12 p-1">
            <mat-label>Enter User</mat-label>
            <input type="text" matInput [formControl]="userNameControl" />
          </mat-form-field>
        </form>
      </div>
      <div class="col-sm-2 p-0 ml-3" *ngIf="showupdatebtn">
        <mat-form-field appearance="outline" class="font-11 col-sm-12 p-1">
          <mat-label> User</mat-label>
          <input type="text" matInput disabled [(ngModel)]="email" />
        </mat-form-field>
      </div>
      <div class="col-sm-2 p-0 ml-3">
        <mat-form-field appearance="outline" class="col-sm-12 font-11 p-1">
          <mat-label>Apps</mat-label>
          <mat-select #select multiple [formControl]="appsControl">
            <input
              type="text"
              (keyup)="onSearchAppList($event)"
              class="form-control"
              placeholder="search"
            />
            <div class="select-all pointer">
              <mat-checkbox
                [(ngModel)]="allSelected"
                [ngModelOptions]="{ standalone: true }"
                (change)="toggleAllSelection()"
                >{{ selectall }}</mat-checkbox
              >
            </div>

            <mat-option
              *ngFor="let a of selectedApps"
              [value]="a"
              (onSelectionChange)="changeApps()"
              >{{ a }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-2 p-0 ml-3">
        <mat-form-field appearance="outline" class="col-sm-12 font-11 p-1">
          <mat-label>permissions</mat-label>
          <mat-select #selectview [formControl]="permissionControl">
            <mat-option
              *ngFor="let a of selectedAppsView"
              [value]="a"
              (onSelectionChange)="changeViews()"
              >{{ a }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-2 mt-2">
        <button
          type="submit"
          mat-raised-button
          class="text-info md font-13"
          *ngIf="!showupdatebtn"
          (click)="addRole()"
        >
          Submit
        </button>
        <button
          type="button"
          mat-raised-button
          class="text-info md font-13"
          *ngIf="showupdatebtn"
          (click)="updateRole()"
        >
          update
        </button>

        <button
          type="button"
          mat-raised-button
          class="text-info md font-13 ml-2"
          *ngIf="showupdatebtn"
          (click)="cancelSelection()"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
  <div class="col-sm-12 p-0 pt-1 mt-1">
    <div class="row m-2 pl-1">
      <!-- <ngx-datatable
            *ngIf="rowData.length>0" #table style="height:300px;width: 100%;" class="material ml-0 mr-0"

            [rows]="rowData"

             [columns]="displayedColumns"
             [columnMode]="'force'"

             [headerHeight]="40" [footerHeight]="40" [scrollbarH]="true"
             [limit]="9" [rowHeight]="40" [scrollbarV]="true"
              #table >
        <ngx-datatable-column name="S.No" [width]="5">
          <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
            {{ rowIndex + 1 }}
          </ng-template>
          </ngx-datatable-column>
          <ngx-datatable-column *ngFor="let column of displayedColumns; let i = index;"   name="{{column.name}}" prop="{{column.prop}}">
          </ngx-datatable-column>


          <ngx-datatable-column name="Action"  [sortable]="false" >
            <ng-template let-value="value"    let-row="row"   ngx-datatable-cell-template>
                <mat-icon class="pointer mr-2 font-18" title="edit"  (click)="editRoleData(openAddData,row)">
                    edit
                  </mat-icon>


                  <mat-icon class="danger pointer ml-2 delete" (click)="deleteRoleData(row.email)" title="Delete">
                    delete_sweep
                  </mat-icon>
            </ng-template>
          </ngx-datatable-column>






            </ngx-datatable> -->

      <div class="col-sm-12">
        <ag-grid-angular
          #agGrid
          class="ag-theme-balham mt-3 customgridheight"
          [rowData]="rowData"
          [columnDefs]="columnDefs"
          [defaultColDef]="defaultColDef"
          [modules]="modules"
          [groupMultiAutoColumn]="true"
          [sideBar]="sidebar"
          [animateRows]="true"
          [pagination]="true"
          [paginationAutoPageSize]="true"
          (gridReady)="onGridReady($event)"
          [autoGroupColumnDef]="autoGroupColumnDef"
          (cellClicked)="cellClicked($event, openAddData)"
        >
        </ag-grid-angular>
      </div>
    </div>
  </div>
</div>
<ng-template #openAddData>
  <div class="row col-sm-12 p-0 m-0 pb-5">
    <h4 class="font-14 fw-500 pr-3 pt-3 pb-3 pl-4 mb-0 primary">
      Update Viz Roles
    </h4>
    <div class="col-sm-12 p-0 pt-1 mt-1">
      <div class="row m-0 pl-1">
        <div class="col-sm-3 p-0 ml-3">
          <mat-form-field appearance="outline" class="col-sm-12 font-11 p-1">
            <mat-label>Apps</mat-label>
            <mat-select #select multiple [formControl]="appsControl">
              <input
                type="text"
                (keyup)="onSearchAppList($event)"
                class="form-control"
                placeholder="search"
              />
              <div class="select-all pointer">
                <mat-checkbox
                  [(ngModel)]="allSelected"
                  [ngModelOptions]="{ standalone: true }"
                  (change)="toggleAllSelection()"
                  >{{ selectall }}</mat-checkbox
                >
              </div>

              <mat-option
                *ngFor="let a of selectedApps"
                [value]="a"
                (onSelectionChange)="changeApps()"
                >{{ a }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-sm-3 p-0 ml-3">
          <mat-form-field appearance="outline" class="col-sm-12 font-11 p-1">
            <mat-label>permissions</mat-label>
            <mat-select #selectview [formControl]="permissionControl">
              <mat-option
                *ngFor="let a of selectedAppsView"
                [value]="a"
                (onSelectionChange)="changeViews()"
                >{{ a }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-sm-2 mt-2">
          <button
            type="submit"
            mat-raised-button
            class="text-info md font-13"
            (click)="updateRole()"
          >
            update
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
